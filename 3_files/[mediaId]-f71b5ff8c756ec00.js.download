(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6818],{69772:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/details/[mediaId]",function(){return n(40477)}])},40477:function(e,t,n){"use strict";n.r(t);var r=n(34051),i=n.n(r),o=n(85893),a=n(67294),u=n(19575),c=n(62286),l=n(9669),s=n.n(l),f=n(17563),d=n(45697),p=n.n(d),y=n(11163),b=n.n(y),m=n(52542),h=n(9664),v=n(81079),g=n(38051),_=n(57586),j=n(98999),w=n(3982),O=n(28282),S=n(19046);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(l){return void n(l)}u.done?t(c):Promise.resolve(c).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){k(o,r,i,a,u,"next",e)}function u(e){k(o,r,i,a,u,"throw",e)}a(void 0)}))}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function P(e){var t=e.mediaId,n=e.pricing,r=e.media,l=e.objSEO,s=e.objSchema,f=e.topRibbonKw,d=(0,y.useRouter)().query,p=(0,a.useContext)(m.ko),v=(0,a.useState)(r),_=v[0],j=v[1],O=function(){var e=x(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.Z)(p.locale.lang,t,p.urlQuery);case 2:(n=e.sent)&&j(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e=d.mediaId.replace(".html","");e.endsWith("_")&&(e=e.replace(/_([^_]*)$/,"$1")),e.endsWith(t)&&r.detail_url&&b().replace("".concat(encodeURI(r.detail_url)))}),[]),(0,a.useEffect)((function(){document.body}),[]),(0,a.useEffect)((function(){j(r)}),[r]),(0,a.useEffect)((function(){if(0!==Object.keys(r).length){var e,t,n={id:r.media_id,type:r.file_type,is_plus:"1"===(null===d||void 0===d?void 0:d.is_plus)?1:0},i=(0,c.parseCookies)(),o=i.rvitems,a=[];o&&/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(o)?(e=JSON.parse(u.Base64.decode(i.rvitems)),(t=R(t=(e=Array.isArray(e)?e:[e]).filter((function(e){return e.id!==r.media_id}))).concat([n])).length>10&&t.shift(),a=u.Base64.encode(JSON.stringify(t))):a=u.Base64.encode(JSON.stringify([n]));var l=(new Date).getTime()/1e3+2592e3;(0,c.setCookie)(null,"rvitems",a,{maxAge:l,path:"/",domain:"123rf.com",secure:!0})}}),[t]),(0,o.jsx)("div",{id:"content",style:{minWidth:"320px"},children:(0,o.jsx)(h.KU,{content:_,children:(0,o.jsx)(g.Z,{item:_,pricingInfo:n,objSEO:l,objSchema:s,topRibbonKw:f,mediaId:t,fetchImageDetails:O},t)})})}P.getInitialProps=function(){var e=x(i().mark((function e(t,n){var r,o,a,u,c,l,d,p,y,b,m,h,g,I,k,x,A,R,q,P,Z,N,C,K,$;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,o=t.req,a=!!t.req,u=r.mediaId.replace(".html",""),c=u.split("_"),l=c[1],d="details",delete(p=E({},r)).mediaId,y={},b={},m=[],h="",I=E({},p),k=o?o.headers.referer:void 0,x=(0,w.Z)(n.lang,l,I,t),A=(0,S.Z)(n.country.code,l,!1,t,{},!1),e.next=19,s().all([x,A]).then(s().spread((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=T(t,2),i=r[0],o=r[1];y=i,b=o})));case 19:if(R=y&&0===Object.keys(y).length&&y.constructor===Object,u.endsWith("_")&&(u=u.replace(/_([^_]*)$/,"$1")),h=R?"":y.detail_url.replace("/",""),q=h.normalize()===r.mediaId.normalize(),P=!R&&(0,v.ci)(_.aK,y.file_type),Z=!R&&((0,v.ci)(_.eR,y.file_type)&&Boolean(y.plus)),a&&k&&!(null===k||void 0===k?void 0:k.includes("123rf.com"))&&Z&&(r.is_plus="1"),Z&&"1"===(null===r||void 0===r?void 0:r.is_plus)&&(g="1"==(null===r||void 0===r?void 0:r.origin)?5:6),(!R&&u.endsWith(l)&&!q||P)&&(N=f.stringify(p),t.res&&t.res.writeHead(301,{Location:"".concat(encodeURI(y.detail_url),"?").concat(N)}).end()),!k||!k.includes("google.com")){e.next=33;break}if(!y||0===Object.keys(y).length||![0,1,2,20,21,22,23].includes(y.file_type)){e.next=33;break}return e.next=32,(0,O.Z)(y.file_type,l,t);case 32:m=e.sent;case 33:if(0===Object.keys(y).length){e.next=39;break}return e.next=36,(0,j.Z)(y,t);case 36:e.t0=e.sent,e.next=40;break;case 39:e.t0={};case 40:return C=e.t0,K=R?{}:(0,v.SJ)(n.lang,y),$={objDetailsPageSchema:K},t.req&&t.res&&R&&(t.res.statusCode=404),e.abrupt("return",{media:y,pricing:b,objSEO:C,objSchema:$,query:r,pageType:d,urlQuery:p,mediaId:l,topRibbonKw:m,imageType:g});case 45:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P.propTypes={locale:p().oneOfType([p().object]).isRequired,mediaId:p().string.isRequired,pricing:p().oneOfType([p().object]).isRequired,media:p().oneOfType([p().object]).isRequired,objSEO:p().oneOfType([p().object]).isRequired,objSchema:p().oneOfType([p().object]).isRequired,topRibbonKw:p().oneOfType([p().array]),imageType:p().number},P.defaultProps={topRibbonKw:[],imageType:null},t.default=P}},function(e){e.O(0,[296,5498,571,8412,653,2655,3773,2984,1664,430,7273,6494,3851,6958,124,5361,7943,5706,5733,3230,2275,606,4826,9748,5191,1614,9774,2888,179],(function(){return t=69772,e(e.s=t);var t}));var t=e.O();_N_E=t}]);